    <div *ngIf="state=='connection'">
      <img draggable="false" src="./assets/images/connScreen.png" style="width:100%"/>
      <div class="connform" style="position: absolute;left:33%;top:23%">
        <div>
          <p>Pseudo :</p>
          <div>
            <input type="text" [(ngModel)]="pseudo"/>
          </div>
          <p>Mot de passe :</p>
          <div>
            <input type="password" [(ngModel)]="mdp"/>
          </div>
          <p style="color:red;height:25px;position:absolute;bottom:15px;">{{message}}</p>
          <div style="display:flex;justify-content: space-around;width:350px;margin:auto;">
            <button [class.disabledButton]="pseudo.length<3||mdp.length<3||mdp.length>20||pseudo.length>20" (click)="connect(false)">Connexion</button>
            <button [class.disabledButton]="pseudo.length<3||mdp.length<3||mdp.length>20||pseudo.length>20" (click)="createAcc()">Créer compte</button>
          </div>
        </div>
      </div>
    </div>

    <div *ngIf="selectedServ!=undefined" class="bigCard" [class.alreadyPulled]="isNoData()&&alreadyPulled()">
      <div class="clickable" (click)="selectedServ=undefined" [class.grised]="isNoData()" style="height:500px;">
        <img [class.golden2]="golden(selectedServ.id)" draggable="false" style="width:320px;height:100%;border:3px ridge #202020;box-shadow: black -9px 8px 15px;" src="{{selectedServ.img1}}"/>
        <img draggable="false" style="width:320px;height:100%;position:absolute;top:3px;left:3px" src="./assets/images/borders/{{selectedServ.level}}.png"/>
        <p style="white-space: break-spaces;line-height: 22px;bottom: 28px;position: absolute;font-size: 30px;text-align: center;color:white;text-shadow: 1px 0 black, 0 1px black, 1px 0 black, 0 -1px black;width:100%">{{selectedServ.nom}}</p>
      </div>
      <p *ngIf="first(selectedServ.id)" class="clickable useTitle" (click)="setTitle()">Use as Title</p>
    </div>

    <div *ngIf="state=='formation'" class="recap" style="position: absolute;top:120px;width:100%" >
      <input type="text" placeholder="Recherche.." [(ngModel)]="recherche" style="left: 43%;position: relative;width:200px;"/>
      <div class="options">
        <p [class.red]="includesFilter('Alter Ego')" (click)="filter('Alter Ego')">Alter Ego</p>
        <p [class.red]="includesFilter('Archer')" (click)="filter('Archer')">Archer</p>
        <p [class.red]="includesFilter('Assassin')" (click)="filter('Assassin')">Assassin</p>
        <p [class.red]="includesFilter('Avenger')" (click)="filter('Avenger')">Avenger</p>
        <p [class.red]="includesFilter('Beast')" (click)="filter('Beast')">Beast</p>
        <p [class.red]="includesFilter('Berserker')" (click)="filter('Berserker')">Berserker</p>
        <p [class.red]="includesFilter('Caster')" (click)="filter('Caster')">Caster</p>
        <p [class.red]="includesFilter('Foreigner')" (click)="filter('Foreigner')">Foreigner</p>
        <p [class.red]="includesFilter('Lancer')" (click)="filter('Lancer')">Lancer</p>
        <p [class.red]="includesFilter('Moon Cancer')" (click)="filter('Moon Cancer')">Moon Cancer</p>
        <p [class.red]="includesFilter('Pretender')" (click)="filter('Pretender')">Pretender</p>
        <p [class.red]="includesFilter('Rider')" (click)="filter('Rider')">Rider</p>
        <p [class.red]="includesFilter('Ruler')" (click)="filter('Ruler')">Ruler</p>
        <p [class.red]="includesFilter('Saber')" (click)="filter('Saber')">Saber</p>
        <p [class.red]="includesFilter('Shielder')" (click)="filter('Shielder')">Shielder</p>
        <p>____________</p>
        <p [class.red]="!showEssences" (click)="showEssences=!showEssences">Craft Essence</p>
      </div>

      <div class="tab2">
        <div class="tab">
          <div *ngFor="let perso of getData();let i=index" style="position:relative;margin-right:10px;" class="clickable" (click)="selectedServ=perso">
            <img [class.golden]="golden(perso.id)" draggable="false" style="width:130px;border:3px ridge #202020;box-shadow: black -9px 8px 15px;" src="{{perso.img1}}" />
            <img draggable="false" style="width:130px;position:absolute;top:3px;left:3px" src="./assets/images/borders/{{perso.level}}.png"/>
            <p style="bottom: 0px;position: absolute;font-size: 17px;width: 25px;text-align: center;color: white;text-shadow: 1px 0 black, 0 1px black, 1px 0 black, 0 -1px black;
              background-color: #aa2002;border-radius: 20px;border: 2px ridge #202020;right: -12px;z-index: 2;">{{perso.qte}}</p>
            <p style="height:0px;white-space: break-spaces;line-height: 10px;width:130px;top: -33px;position: relative;font-size: 15px;text-align: center;color:white;text-shadow: 1px 0 black, 0 1px black, 1px 0 black, 0 -1px black;">{{perso.nom}}</p>
            
          </div>
        </div>
        
        <div class="tab">
          <div *ngFor="let perso of getNoData();let i=index" style="position:relative;margin-right:10px;filter: grayscale(200%);opacity: 0.6;" class="clickable2" (click)="selectedServ=perso">
            <img draggable="false" style="width:130px;border:3px ridge #202020;box-shadow: black -9px 8px 15px;" src="{{perso.img1}}"/>
            <img draggable="false" style="width:130px;position:absolute;top:3px;left:3px;" src="./assets/images/borders/{{perso.level}}.png"/>
            <p style="width:130px;top: -33px;position: relative;font-size: 15px;text-align: center;color:white;text-shadow: 1px 0 black, 0 1px black, 1px 0 black, 0 -1px black;
            white-space: break-spaces;line-height: 10px;">{{perso.nom}}</p>
          </div>
        </div>
      </div>
    </div>

    <div *ngIf="state=='friends'" class="containerScore">
      <div style="width:100%">
        <button (click)="getUsers()" style="position: absolute;top: -10px;left: 37%;width: 200px;">Refresh</button>
        <div *ngFor="let user of users;let i=index" >
          <div style="display:flex;">
            <p style="color: white;font-size: 50px;position: absolute;left:10px;text-shadow: 4px 0 black, 0 1px black, 1px 0 black, 0 -1px black;">{{(i+1)}}</p>
            <div class="score" style="left:85px;margin-top:10px;" [style.border-color]="user.id==id?'#bb9930':'#bbb'">
              <p class="sc" style="top:-3px">{{user.score}}</p><img draggable="false" src="./assets/images/graal.png"/>
            </div>
            <div class="score" style="left:105px;margin-top:10px;" [style.border-color]="user.id==id?'#bb9930':'#bbb'">
              <p class="sc" style="top:-3px">{{user.quartz}}</p><img draggable="false" src="./assets/images/quartz.png"/>
            </div>
            <p style="position: absolute;left: 530px;padding-top: 4px;font-size:30px;text-align: left;text-shadow: 4px 0 black, 0 1px black, 1px 0 black, 0 -1px black;" [style.color]="user.id==id?'#bb9930':'white'">{{user.nom}}</p>
            <p style="position: absolute;left: 530px;padding-top: 34px;font-size:14px;text-align: left;text-shadow: 4px 0 black, 0 1px black, 1px 0 black, 0 -1px black;" [style.color]="user.id==id?'#bb9930':'white'">{{user.title}}</p>
          </div>
        </div>
      </div>
    </div>
        
    
    <div *ngIf="state!='connection'">
      <div class="header" style="box-shadow: white 1px 1px 10px;width: 99%;height: 90px;background-color: rgba(100,150,200,0.8);border: 3px ridge #555;display:flex;justify-content: space-around;margin-bottom:20px;">
        <div><p>{{score}}</p><img draggable="false" src="./assets/images/graal.png"/></div>
        <p style="color: white;text-shadow: 4px 0 black, 0 1px black, 1px 0 black, 0 -1px black;padding-top: 20px;font-size: 35px;position: absolute;">{{pseudo}}</p>
        <p style="color: black;text-shadow: 4px 0 white, 0 1px white, 1px 0 white, 0 -1px white;padding-top: 55px;font-size: 20px;position: absolute;">{{user.title}}</p>
        <div><p>{{quartz}}</p><img draggable="false" src="./assets/images/quartz.png"/></div>
        <p style="position: absolute;top: 68px;right: 280px;color: white;text-shadow: 4px 0 black, 0 1px black, 1px 0 black, 0 -1px black;">Next Quartz : {{nextSQ < 10?'0':''}}{{nextSQ}}:{{nextSQs < 10?'0':''}}{{nextSQs}}</p>
      </div>
  
      <img draggable="false" src="./assets/images/wait.png" *ngIf="state=='invocation'" style="position: absolute;bottom: 230px;width: 1370px;left: 170px;"/>
  
      <img draggable="false" src="./assets/images/bgrecap.png" [style.display]="state=='recap'||state=='formation'||state=='friends'?'unset':'none'" style="position: absolute;z-index: -1;width: 100%;top: 100px;height:88%"/>
  
      <div class="recap" *ngIf="state=='recap'" style="display:flex;justify-content: center;top: 270px;position: absolute;width: 100%;">
        <img draggable="false" style="width:130px" *ngFor="let perso of persosInvoqued" src="{{perso.img1}}"/>
        <div style="position: absolute;">
          <img draggable="false" style="width:130px" *ngFor="let perso of persosInvoqued" src="./assets/images/borders/{{perso.level}}.png"/>
        </div>
      </div>
      
      <div style="position:relative;height:505px;left:150px;width:fit-content" *ngIf="state=='banner'">
        <img draggable="false" style="position:absolute;width:1400px;" src="./assets/images/backBanner.png"/>
        <p  class="nextBann" >Next Banner : {{nextChangeBanner < 10?'0':''}}{{nextChangeBanner}}:{{nextChangeBanners < 10?'0':''}}{{nextChangeBanners}}</p>
        <div style="position:absolute;left:350px;top:135px" (mouseleave)="focus=undefined">
          <div style="display:flex">
            <div *ngFor="let perso of persos5" style="position:relative">
              <img draggable="false" style="height:90px;border: 3px ridge #222;" src="{{perso.img1}}" (mouseover)="focus=perso" class="clickable" (click)="selectedServ=perso"/>
              <div class="boosted2 row5"  style="pointer-events: none;z-index: 3;">
                <p [style.display]="focus==perso?'unset':'none'">{{perso.level}}★</p>
                <p [style.display]="focus==perso?'unset':'none'">{{perso.nom}}</p>
              </div>
            </div>
          </div>
          <div style="display:flex">
            <div *ngFor="let perso of persos4" style="position:relative">
              <img draggable="false" style="height:90px;border: 3px ridge #222;" src="{{perso.img1}}" (mouseover)="focus=perso" class="clickable" (click)="selectedServ=perso"/>
              <div class="boosted2"  style="pointer-events: none;z-index: 3;">
                <p [style.display]="focus==perso?'unset':'none'">{{perso.level}}★</p>
                <p [style.display]="focus==perso?'unset':'none'">{{perso.nom}}</p>
              </div>
            </div>
          </div>
        </div>
        <div class="boosted1 left" style="margin-top: 9px;left:9px;position:absolute;">
          <img draggable="false" style="border: 5px ridge #222;height:478px;" src="{{perso5.img1}}"/>
          <div>
            <p>{{perso5.level}}★</p>
            <p>{{perso5.nom}}</p>
          </div>
        </div>
        <div class="boosted1 right" style="margin-top: 9px;position: absolute;left: 1043px">
          <img draggable="false" style="border: 5px ridge #222;height: 478px;" src="{{perso4.img1}}"/>
          <div>
            <p>{{perso4.level}}★</p>
            <p>{{perso4.nom}}</p>
          </div>
        </div>
        
        <img draggable="false" style="box-shadow: green 0px 0px 25px;position:absolute;width:1400px;pointer-events: none;" src="./assets/images/frontBanner.png" />
  
        <div style="position:absolute;left:410px;bottom:-10%;display:flex;">
          <img draggable="false" [class.disabled]="cantInvoq(1)" class="summon" style="margin-right:50px;" src="./assets/images/summon1.png" (click)="startSummon(1)"/>
          <img draggable="false" [class.disabled]="cantInvoq(10)" class="summon"  src="./assets/images/summon.png" (click)="startSummon(10)"/>
        </div>
      </div>
  
      <div [style.display]="state=='invocation'?'unset':'none'">
        <video muted id="video1"  width="1407px" height="580px" style="left:150px;position: absolute;" (ended)="videoEnd()">
            <source src="./assets/videos/cligno.mp4" type='video/mp4'/>
        </video>
  
        <div [style.display]="isShow()?'unset':'none'">
          <img draggable="false"  [@grow]='getGrowState()' [style.display]="!isCE()&&revealed()?'unset':'none'" style="position: absolute;height: 575px;left: 680px;
          width:367px;" src="{{getImage()}}"/>
    
          <img draggable="false" [@rotate2]='getRotateState2()' [@grow]='getGrowState()' [style.display]="isCE()&&load?'unset':'none'" style="position: absolute;height: 575px;left: 680px;
          width:367px;" src="{{getImage()}}"/>
    
          <img draggable="false" src="{{getBorder()}}" [style.display]="!isCE()&&revealed()?'unset':'none'"  [@grow]='getGrowState()'style="position: absolute;height: 570px;width:367px;left: 675px;pointer-events: none;border: 5px ridge #202020;box-shadow: 10px 10px 15px black;"/>
          <img draggable="false" src="{{getBorder()}}" [style.display]="isCE()&&load?'unset':'none'"  [@rotate]='getRotateState()' [@grow]='getGrowState()' style="position: absolute;height: 570px;width:367px;left: 675px;pointer-events: none;border: 5px ridge #202020;box-shadow: 10px 10px 15px black;" />
                
          <p *ngIf="revealed()||isCE()" [@grow]='getGrowState()' [@rotate]='getRotateState()'
          style="position: absolute;height: 575px;width:367px;left: 687px;pointer-events: none;font-size: 35px;bottom: 245px;text-align: center;color:white;height:auto;
          text-shadow: 4px 0 black, 0 1px black, 1px 0 black, 0 -1px black;line-height: 25px;">{{getName()}}</p>
    
          <img draggable="false" *ngIf="load&&!isCE()" [@rotate]='getRotateState()' [@crop]='getCropState()' style="position: absolute;height: 575px;left: 675px;width:367px;" src="{{getBack()}}"/>
        </div>
  
      </div>
      <div class="footer" style="z-index: 3;box-shadow: white 1px -1px 10px;position: absolute;bottom: 0px;width: 99%;height: 190px;background-color: rgba(100,150,200,0.8);border: 3px ridge orange;display:flex;justify-content: space-around;">
        <img draggable="false" (click)="recherche='';selectedServ=undefined;playButton();state!='invocation'?state='formation':null" src="./assets/images/formationButton.png"/>
        <img draggable="false" (click)="recherche='';selectedServ=undefined;playButton();state!='invocation'?state='banner':null" src="./assets/images/summonButton.png"/>
        <img draggable="false" (click)="recherche='';selectedServ=undefined;playButton();state!='invocation'?state='friends':null" src="./assets/images/friendsButton.png"/>
      </div>
    </div>
    