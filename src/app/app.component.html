    <div *ngIf="state=='connection'" style="background-image: url('./assets/images/connScreen.png'); background-size: 100% 100%; width: 100%; height: auto; min-height: 100%; min-width: 20px; position: fixed;">
      
      <div class="header" style="box-shadow: white 1px 1px 10px;width: 99.5%;height: 12vh;background-color: #6496c8cc;border: 3px ridge #555;display:flex;justify-content: center;margin-bottom:0px;">
        <img draggable="false" src="./assets/images/graal.png" style="width: 40px; height: 8vh; right: 40%; position:relative; top: 1vh;"/>
        <div style="left: 15%;"><p>{{score}}</p></div>
        <p style="color: white;text-shadow: 4px 0 black, 0 1px black, 1px 0 black, 0 -1px black;font-size: 35px; text-align:center; position: absolute;">{{pseudo}}</p>
        
        <div style="right: 10%; justify-content: center; display: flexbox;">
          <img draggable="false" src="./assets/images/quartz.png" style="width: 40px; height: 8vh; top: -1vh; position:absolute;left: 7%;"/>
          <p style="position: absolute; right: 20%;">{{quartz}}</p>
          <p style="position: absolute;top: 110%;right: 10%;color: white;text-shadow: 4px 0 black, 0 1px black, 1px 0 black, 0 -1px black; font-size: 2vh;">Next Quartz : {{nextSQ < 10?'0':''}}{{nextSQ}}:{{nextSQs < 10?'0':''}}{{nextSQs}}</p>
        </div>
        
      </div>
      
      <div class="connform" style="position: absolute; left:20%; top:25%; height: 30%; width: 60%;">
        <div style="position: absolute; left:15%; top:25%; height: 50%; width: 70%;">
          <p>Pseudo :</p>
          <div>
            <input type="text" [(ngModel)]="pseudo"/>
          </div>
          <p>Mot de passe :</p>
          <div>
            <input type="password" [(ngModel)]="mdp"/>
          </div>
          <p style="color:red;height:25px;position:absolute;bottom:15px;">{{message}}</p>
          <div style="margin:auto; width: 100%; 
          display: flex;
          justify-content: center;">
            <button [class.disabledButton]="pseudo.length<3||mdp.length<3||mdp.length>20||pseudo.length>20" (click)="connect(false)" style="margin: 10px auto;">Connexion</button>
            <button [class.disabledButton]="pseudo.length<3||mdp.length<3||mdp.length>20||pseudo.length>20" (click)="createAcc()" style="margin: 10px auto;">Créer compte</button>
          </div>
        </div>
      </div>
    </div>

    <div *ngIf="state=='formation'" class="recap" style="position: absolute;top:120px;width:100%" >
      <div class="options">
        <p [class.red]="includesFilter('Alter Ego')" (click)="filter('Alter Ego')">Alter Ego</p>
        <p [class.red]="includesFilter('Archer')" (click)="filter('Archer')">Archer</p>
        <p [class.red]="includesFilter('Assassin')" (click)="filter('Assassin')">Assassin</p>
        <p [class.red]="includesFilter('Avenger')" (click)="filter('Avenger')">Avenger</p>
        <p [class.red]="includesFilter('Beast')" (click)="filter('Beast')">Beast</p>
        <p [class.red]="includesFilter('Berserker')" (click)="filter('Berserker')">Berserker</p>
        <p [class.red]="includesFilter('Caster')" (click)="filter('Caster')">Caster</p>
        <p [class.red]="includesFilter('Foreigner')" (click)="filter('Foreigner')">Foreigner</p>
        <p [class.red]="includesFilter('Lancer')" (click)="filter('Lancer')">Lancer</p>
        <p [class.red]="includesFilter('Moon Cancer')" (click)="filter('Moon Cancer')">Moon Cancer</p>
        <p [class.red]="includesFilter('Pretender')" (click)="filter('Pretender')">Pretender</p>
        <p [class.red]="includesFilter('Rider')" (click)="filter('Rider')">Rider</p>
        <p [class.red]="includesFilter('Ruler')" (click)="filter('Ruler')">Ruler</p>
        <p [class.red]="includesFilter('Saber')" (click)="filter('Saber')">Saber</p>
        <p [class.red]="includesFilter('Shielder')" (click)="filter('Shielder')">Shielder</p>
        <p>&nbsp;</p>
        <p [class.red]="includesFilter('Craft Essence')" (click)="filter('Craft Essence')">Craft Essence</p>
      </div>

      <div class="tab2">
        <div class="tab">
          <div *ngFor="let perso of getData();let i=index" style="position:relative;margin-right:10px;">
            <img draggable="false" style="width:130px;border:3px ridge #202020;box-shadow: black -9px 8px 15px;" src="{{perso.img1}}"/>
            <img draggable="false" style="width:130px;position:absolute;top:3px;left:3px" src="./assets/images/borders/{{perso.level}}.png"/>
            <p style="bottom: 0px;position: absolute;font-size: 17px;width: 25px;text-align: center;color: white;text-shadow: 1px 0 black, 0 1px black, 1px 0 black, 0 -1px black;
              background-color: #aa2002;border-radius: 20px;border: 2px ridge #202020;right: -12px;z-index: 2;">{{perso.qte}}</p>
            <p style="height:0px;white-space: break-spaces;line-height: 10px;width:130px;top: -33px;position: relative;font-size: 15px;text-align: center;color:white;text-shadow: 1px 0 black, 0 1px black, 1px 0 black, 0 -1px black;">{{perso.nom}}</p>
            
          </div>
        </div>
        
        <div class="tab">
          <div *ngFor="let perso of getNoData();let i=index" style="position:relative;margin-right:10px;filter: grayscale(200%);opacity: 0.6;">
            <img draggable="false" style="width:130px;border:3px ridge #202020;box-shadow: black -9px 8px 15px" src="{{perso.img1}}"/>
            <img draggable="false" style="width:130px;position:absolute;top:3px;left:3px" src="./assets/images/borders/{{perso.level}}.png"/>
            <p style="width:130px;top: -33px;position: relative;font-size: 15px;text-align: center;color:white;text-shadow: 1px 0 black, 0 1px black, 1px 0 black, 0 -1px black;
            white-space: break-spaces;line-height: 10px;">{{perso.nom}}</p>
          </div>
        </div>
      </div>
    </div>

    <div *ngIf="state=='friends'" class="containerScore" style="left: 10%; top: 20%; width: 80%; height: 60%;">
      <div style="width:100%">
        <button (click)="getUsers()" style="position: absolute;top: -10px;left: 265px;width: 200px;">Refresh</button>
        <div *ngFor="let user of users;let i=index" >
          <div style="display:flex;">
            <p style="color: white;font-size: 50px;position: absolute;left:10px;text-shadow: 4px 0 black, 0 1px black, 1px 0 black, 0 -1px black;">{{(i+1)}}</p>
            <div class="score" style="left:85px;margin-top:10px;" [style.border-color]="user.id==id?'#bb9930':'#bbb'">
              <p class="sc" style="top:-3px">{{user.score}}</p><img draggable="false" src="./assets/images/graal.png"/>
            </div>
            <div class="score" style="left:105px;margin-top:10px;" [style.border-color]="user.id==id?'#bb9930':'#bbb'">
              <p class="sc" style="top:-3px">{{user.quartz}}</p><img draggable="false" src="./assets/images/quartz.png"/>
            </div>
            <p style="position: absolute;left: 530px;padding-top: 10px;font-size:30px;text-align: left;" [style.color]="user.id==id?'#bb9930':'#aa2020'">{{user.nom}}</p>
          </div>
        </div>
      </div>
    </div>
        
    
    <div *ngIf="state!='connection'">
      <!--<div [style.display]="state=='recap'||state=='formation'||state=='friends'?'unset':'none'" style="background-image: url('./assets/images/bgrecap.png'); background-size: cover; width: 100%; height: auto; min-height: 100%; min-width: 20px; position: fixed;">

      </div>-->
      
      <div class="header" style="box-shadow: white 1px 1px 10px;width: 99.5%;height: 12vh;background-color: #6496c8cc;border: 3px ridge #555;display:flex;justify-content: center;margin-bottom:0px;">
        <div style="left: 15%;">
          <img draggable="false" src="./assets/images/graal.png" style="width: 40px; height: 8vh; top: -1vh; position:absolute;left: 7%;"/>
          <p style="position: absolute; right: 10%;">{{score}}</p>
        </div>
        <p style="color: white;text-shadow: 4px 0 black, 0 1px black, 1px 0 black, 0 -1px black;font-size: 35px; text-align:center; position: absolute;">{{pseudo}}</p>
        
        <div style="right: 10%; justify-content: center; display: flexbox;">
          <img draggable="false" src="./assets/images/quartz.png" style="width: 40px; height: 8vh; top: -1vh; position:absolute;left: 7%;"/>
          <p style="position: absolute; right: 10%;">{{quartz}}</p>
          <p style="position: absolute;top: 110%;right: 10%;color: white;text-shadow: 4px 0 black, 0 1px black, 1px 0 black, 0 -1px black; font-size:clamp(12px, 2vh, 48px);">Next Quartz : {{nextSQ < 10?'0':''}}{{nextSQ}}:{{nextSQs < 10?'0':''}}{{nextSQs}}</p>
        </div>
        
      </div>
  
      <img draggable="false" src="./assets/images/wait.png" *ngIf="state!='recap'&&state!='formation'&&state!='friends'" style="position: absolute;bottom: 230px;width: 1370px;left: 170px;"/>
  
      <img draggable="false" src="./assets/images/bgrecap.png" [style.display]="state=='recap'||state=='formation'||state=='friends'?'unset':'none'" style="position: absolute;z-index: -1;width: 100%;height:100%; top: 0%;"/>
  
      <div class="recap" *ngIf="state=='recap'" style="display:flex;justify-content: center;top: 270px;position: absolute;width: 100%;">
        <img draggable="false" style="width:130px" *ngFor="let perso of persosInvoqued" src="{{perso.img1}}"/>
        <div style="position: absolute;">
          <img draggable="false" style="width:130px" *ngFor="let perso of persosInvoqued" src="./assets/images/borders/{{perso.level}}.png"/>
        </div>
      </div>
      
      <div style="position:relative;height:505px;left:150px;width:fit-content" *ngIf="state=='banner'">
        <img draggable="false" style="position:absolute;width:1400px" src="./assets/images/backBanner.png"/>
        <p  class="nextBann" >Next Banner : {{nextChangeBanner < 10?'0':''}}{{nextChangeBanner}}:{{nextChangeBanners < 10?'0':''}}{{nextChangeBanners}}</p>
        <div style="position:absolute;left:350px;top:135px">
          <div style="display:flex">
            <div *ngFor="let perso of persos5" style="position:relative">
              <img draggable="false" style="height:90px;border: 3px ridge #222;" src="{{perso.img1}}" />
              <div class="boosted2 row5">
                <p>{{perso.level}}★</p>
                <p>{{perso.nom}}</p>
              </div>
            </div>
          </div>
          <div style="display:flex">
            <div *ngFor="let perso of persos4" style="position:relative">
              <img draggable="false" style="height:90px;border: 3px ridge #222;" src="{{perso.img1}}" />
              <div class="boosted2">
                <p>{{perso.level}}★</p>
                <p>{{perso.nom}}</p>
              </div>
            </div>
          </div>
        </div>
        <div class="boosted1 left" style="margin-top: 9px;left:9px;position:absolute;">
          <img draggable="false" style="border: 5px ridge #222;height:478px;" src="{{perso5.img1}}"/>
          <div>
            <p>{{perso5.level}}★</p>
            <p>{{perso5.nom}}</p>
          </div>
        </div>
        <div class="boosted1 right" style="margin-top: 9px;position: absolute;left: 1043px">
          <img draggable="false" style="border: 5px ridge #222;height: 478px;" src="{{perso4.img1}}"/>
          <div>
            <p>{{perso4.level}}★</p>
            <p>{{perso4.nom}}</p>
          </div>
        </div>
        
        <img draggable="false" style="box-shadow: green 0px 0px 25px;position:absolute;width:1400px" src="./assets/images/frontBanner.png" />
  
        <div style="position:absolute;left:410px;bottom:-10%;display:flex;">
          <img draggable="false" [class.disabled]="cantInvoq(1)" class="summon" style="margin-right:50px;" src="./assets/images/summon1.png" (click)="startSummon(1)"/>
          <img draggable="false" [class.disabled]="cantInvoq(10)" class="summon"  src="./assets/images/summon.png" (click)="startSummon(10)"/>
        </div>
      </div>
  
      <div [style.display]="state=='invocation'?'unset':'none'">
        <video muted id="video1"  width="1407px" height="580px" style="left:150px;position: absolute;" (ended)="videoEnd()">
            <source src="./assets/videos/cligno.mp4" type='video/mp4'/>
        </video>
  
        <div [style.display]="isShow()?'unset':'none'">
          <img draggable="false"  [@grow]='getGrowState()' [style.display]="!isCE()&&revealed()?'unset':'none'" style="position: absolute;height: 575px;left: 680px;
          width:367px;" src="{{getImage()}}"/>
    
          <img draggable="false" [@rotate2]='getRotateState2()' [@grow]='getGrowState()' [style.display]="isCE()&&load?'unset':'none'" style="position: absolute;height: 575px;left: 680px;
          width:367px;" src="{{getImage()}}"/>
    
          <img draggable="false" src="{{getBorder()}}" [style.display]="!isCE()&&revealed()?'unset':'none'"  [@grow]='getGrowState()'style="position: absolute;height: 570px;width:367px;left: 675px;pointer-events: none;border: 5px ridge #202020;box-shadow: 10px 10px 15px black;"/>
          <img draggable="false" src="{{getBorder()}}" [style.display]="isCE()&&load?'unset':'none'"  [@rotate]='getRotateState()' [@grow]='getGrowState()' style="position: absolute;height: 570px;width:367px;left: 675px;pointer-events: none;border: 5px ridge #202020;box-shadow: 10px 10px 15px black;" />
                
          <p *ngIf="revealed()||isCE()" [@grow]='getGrowState()' [@rotate]='getRotateState()'
          style="position: absolute;height: 575px;width:367px;left: 687px;pointer-events: none;font-size: 35px;bottom: 245px;text-align: center;color:white;height:auto;
          text-shadow: 4px 0 black, 0 1px black, 1px 0 black, 0 -1px black;line-height: 25px;">{{getName()}}</p>
    
          <img draggable="false" *ngIf="load&&!isCE()" [@rotate]='getRotateState()' [@crop]='getCropState()' style="position: absolute;height: 575px;left: 675px;width:367px;" src="{{getBack()}}"/>
        </div>
  
      </div>
      <div class="footer" style="z-index: 3;position: absolute;bottom: 0px;width: 99.5%;height: 10%;background-color: rgba(100,150,200,0.8);border: 4px ridge orange;display:flex;justify-content: space-around;">
        <img draggable="false" (click)="playButton();state!='invocation'?state='formation':null" src="./assets/images/formationButton.png"/>
        <img draggable="false" (click)="playButton();state!='invocation'?state='banner':null" src="./assets/images/summonButton.png"/>
        <img draggable="false" (click)="playButton();state!='invocation'?state='friends':null" src="./assets/images/friendsButton.png"/>
      </div>
    </div>
    